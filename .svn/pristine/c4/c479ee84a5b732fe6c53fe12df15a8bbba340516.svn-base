#-*- coding:utf-8 -*-
from aw import *

'''
用例标题:开关机20次
预置条件：
1.电源引线插入board板的2,3脚，放在2号继电器上（从0开始数）
2.音箱开机（连接电源）
测试步骤：
1.音箱关机
2.音箱开机
预期结果：
1.1 音箱有关机提示音
1.2 音箱关机
2.1 音箱有开机提示音
2.2 音箱开机
'''

class TestScript(unittest.TestCase):
    def setUp(self):
        print('手机进入蓝牙设置界面')
        Common(SUBDUT1).goBackHome()
        Setting(SUBDUT1).launchSubSetings(["Bluetooth",])


    def step1(self):
        print("步骤1.音箱关机")
        Common(DUT).switchPowerMode()
        Logger.info("Product has power off")
        Common().wait(5)

        #####################################
        #print("检测点1.1：音箱有关机提示音")  #
        #####################################

        Logger.info("1.2 音箱关机")
        Checkpoint(SUBDUT1).checkIfNotExist(text="Connected")

    def step2(self):
        print("步骤2.音箱开机")
        Common(DUT).switchPowerMode()
        Logger.info("Product has power on")
        Common().wait(10)

        #####################################
        #print("检测点2.1：音箱有开机提示音")  #
        #####################################
        Logger.info("2.2 音箱开机")
        Checkpoint(SUBDUT1).checkIfExist(text="Connected")

    def test_step(self):
        for time in range(1,CONST.LOOP.LOOP20+1):
            Logger.info("Run %d times"%time)
            self.step1()
            self.step2()

    def tearDown(self):
        print("收尾：返回主界面")
        Common(DUT).connectLibProduct()
        Common(SUBDUT1).goBackHome()
        Common(SUBDUT1).startActivity(activity_name=CONST.PKGNAME.QQMUSIC, timeOut=5)
        Common(SUBDUT1).clickWhenExist(text=CONST.TEXT.MINE)
        Common(SUBDUT1).clickById(id=CONST.ID.QQMUSIC_PLAY_SONG_ICON)  # click local song icon(left-bottom)
        QQMusic(SUBDUT1).switchDlnaMode()
        Common().wait(2)  # wait switch DLNA!
        QQMusic(SUBDUT1).switchPauseStatus()  # click pause button
        Common(SUBDUT1).goBackHome()

if __name__ == "__main__":
    unittest.main()
